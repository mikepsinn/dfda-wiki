# Get list of staged markdown, JSON, and template files
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(md|json|njk)$' || true)

if [ -z "$STAGED_FILES" ]; then
  # No relevant files staged, skip validation
  exit 0
fi

# Count staged files
FILE_COUNT=$(echo "$STAGED_FILES" | wc -l | tr -d ' ')
echo "üîç Validating links in $FILE_COUNT staged file(s)..."
echo ""

# Run validation on all staged files at once - let the script handle output
npm run validate-links:file "$STAGED_FILES"
